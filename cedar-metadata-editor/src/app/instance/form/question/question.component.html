<ng-container *ngIf="node.type == 'static';else notStaticType">
  <!-- youtube -->
  <div *ngIf="node.subtype == 'youtube'">

    <youtube-player
      [videoId]="node.value"
      [height] = "node['size'] ? node['size']['height'] : null"
      [width] = "node['size'] ? node['size']['width'] : null"
      (ready)="savePlayer($event)"
      (change)="onStateChange($event)"
    ></youtube-player>

  </div>

  <!-- image -->
  <div *ngIf="node.subtype == 'image'">
    <figure>
      <img [src]="node.value"  alt="{{node.label}}"
        type="image/png" />
      <figcaption><label>{{node.label}}</label></figcaption>
    </figure>
  </div>

  <!-- richtext -->
  <div *ngIf="node.subtype == 'richtext'">
    <div [innerHTML]="node.value"></div>
  </div>

  <!-- sectionbreak -->
  <div *ngIf="node.subtype == 'section-break'">
  <div class="section-break">
    {{node.name}}
  </div>
  </div>

  <!-- pagebreak -->
  <div *ngIf="node.subtype == 'page-break'">
     page-break
  </div>
</ng-container>

<ng-template #notStaticType>

<div [formGroup]="formGroup" class="form-group">

    <label class="question-label" [attr.for]="node.name">  <!--[matTooltip]="node.help"-->
      {{node.name}}
    </label>


      <!-- attribute-value -->
      <div *ngIf="node.type == 'attribute-value'">
        <div *ngFor="let fg of formGroup.controls['values']['controls'];let j = index">
          <div style="display:flex;">
            <mat-form-field class="example-full-width mat-form-field" style="padding:10px">
              {{node.type}}
              <input matInput  [placeholder]="node.placeholder"
                [formControl]="fg['controls']['values']['controls'][0]"
                [type]="node.subtype"
                (change)="onAVLabelChanges(node,j,'rdfs:label',fg['controls']['values']['controls'][0].value);">
            </mat-form-field>
            <mat-form-field class="example-full-width mat-form-field" style="padding:10px">
              <input matInput  [placeholder]="node.placeholder"
                [formControl]="fg['controls']['values']['controls'][1]"
                type="text"
                (change)="onAVValueChanges(node,j,'@value',fg['controls']['values']['controls'][1].value);">
            </mat-form-field>

            <button mat-icon-button *ngIf="!disabled" (click)="copyAttributeValue(node,j)">
              <mat-icon [inline]="true"
                style="font-size:14px">
                add
              </mat-icon>
            </button>
            <button mat-icon-button *ngIf="!disabled" (click)="removeAttributeValue(node,j)">
              <mat-icon [inline]="true"
                style="font-size:14px">
                remove
              </mat-icon>
            </button>

          </div>
        </div>
      </div>


      <div *ngIf="node.type !== 'element'" [ngSwitch]="node.type" style="margin:10px 0;">
        <div *ngFor="let control of formGroup.controls['values']['controls'];index as i">

      <span *ngIf="node.minItems && allowsMultiple(node.type)">
        {{node.name}} ({{(i + 1)}}  of {{ node.maxItems || 'N' }})
        <button mat-icon-button *ngIf="!disabled" (click)="addNewItem()"><mat-icon [inline]="true"
          style="font-size:14px">add</mat-icon></button>
        <button mat-icon-button *ngIf="!disabled" (click)="deleteLastItem()"><mat-icon [inline]="true"
          style="font-size:14px">remove</mat-icon></button>
      </span>

          <!-- controlled -->
          <div *ngSwitchCase="'controlled'">
            <controlled [group]="formGroup" [controlledGroup]="controlledGroup"
              (onRemovedOption)="onRemovedControlled($event)"
              (onSelectedOption)="onSelectedControlled($event)"></controlled>
          </div>

          <!-- radio -->
          <div *ngSwitchCase="'radio'">
            <mat-radio-group [formControl]="control" [labelPosition]="'after'"
              class="mat-form-field">
          <span *ngFor="let opt of node.options; let j = index" style="padding-right:10px">
          <label class="radio-label">
            <mat-radio-button
              [disabled]="disabled"
              (click)="onChanges(node, i, opt['label'])"
              [value]="j"
              [aria-label]="opt['label']"
              style="padding-right:10px">
              <span>{{opt['label']}}</span>
            </mat-radio-button>
          </label>
          </span>
            </mat-radio-group>
          </div>

          <!-- checkbox -->
          <div *ngSwitchCase="'checkbox'" class="mat-form-field">
        <span *ngFor="let opt of node.options;let j = index" style="padding-right:10px">
          <label class="checkbox-label">
            <mat-checkbox
              [disabled]="disabled"
              [value]="opt['label']"
              (change)="toggleChecked(node, i, opt['label']);onChanges(node, i, node.value)"
              [checked]="isChecked(node, i,opt['label'])"
              [aria-label]="opt['label']">
            </mat-checkbox>
            {{opt['label']}}
          </label>
        </span>
          </div>

          <!-- textfield -->
          <mat-form-field *ngSwitchCase="'textfield'" class="example-full-width mat-form-field">
            <input matInput [placeholder]="node.placeholder" [formControl]="control" [type]="node.subtype"
              [value]="node.value[i]"
              (change)="onChanges(node, i, control['value'])"
              [required]="node.required"
              [minlength]="node.minLength" [maxlength]="node.maxLength"
              [min]="node.min" [max]="node.max"
              [errorStateMatcher]="matcher">
            <mat-hint>{{node.hint}}</mat-hint>
            <mat-error *ngIf="control.hasError('url') && !control.hasError('required')">
              Please enter a valid URL
            </mat-error>
            <mat-error *ngIf="control.hasError('tel') && !control.hasError('required')">
              Please enter a valid telephone number
            </mat-error>
            <mat-error *ngIf="control.hasError('email') && !control.hasError('required')">
              Please enter a valid email address
            </mat-error>
            <mat-error *ngIf="control.hasError('required')">
              Value is <strong>required</strong>
            </mat-error>
            <mat-error *ngIf="control.hasError('numeric')">
              Value must be a <strong>number</strong>
            </mat-error>
            <mat-error *ngIf="control.hasError('decimal')">
              Value must have exactly
              <strong>{{control.errors['decimal']['required']}}</strong>
              decimal places instead of
              <strong>{{control.errors['decimal']['actual']}}</strong>
            </mat-error>
            <mat-error *ngIf="control.hasError('min')">
              Value {{control.errors['min']['actual']}} must be larger than
              <strong>{{control.errors['min']['min']}}</strong>
            </mat-error>
            <mat-error *ngIf="control.hasError('max')">
              Value {{control.errors['max']['actual']}} must be smaller than
              <strong>{{control.errors['max']['max']}}</strong>
            </mat-error>
            <mat-error *ngIf="control.hasError('minlength')">
              Value length {{control.errors['minlength']['actualLength']}} is smaller than
              <strong>{{control.errors['minlength']['requiredLength']}}</strong>
            </mat-error>
            <mat-error *ngIf="control.hasError('maxlength')">
              Value length {{control.errors['maxlength']['actualLength']}} is larger than
              <strong>{{control.errors['maxlength']['requiredLength']}}</strong>
            </mat-error>
          </mat-form-field>

          <!-- textarea -->
          <mat-form-field *ngSwitchCase="'textarea'" class="example-full-width mat-form-field">
      <textarea matInput [placeholder]="node.placeholder" [formControl]="control" type="text"
        (change)="onChanges(node, i, control['value'])"
        [required]="node.required"
        [errorStateMatcher]="matcher"></textarea>
            <mat-hint>{{node.hint}}</mat-hint>
            <mat-error *ngIf="control.hasError('required')">
              Value is <strong>required</strong>
            </mat-error>
          </mat-form-field>

          <!-- date -->
          <mat-form-field *ngSwitchCase="'date'" class="mat-form-field">
            <input matInput [matDatepicker]="picker" [placeholder]="node.placeholder" [formControl]="control"
              (dateChange)="onChanges(node, i, control['value'])"
              [value]="control['value']">
            <mat-hint>{{node.hint}}</mat-hint>
            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>

          <div *ngSwitchCase="'list'">
            <div *ngIf="node.multipleChoice">
              <mat-form-field class="mat-form-field"  >
                <mat-select [placeholder]="node.placeholder" [formControl]="control" multiple
                  [required]="node.required"
                  [(value)]="node.value[i]"
                  (valueChange)="onChanges(node, i, node.value[i])">
                  <mat-option *ngFor="let opt of node.options" [value]="opt['label']">{{opt['label']}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
            <div *ngIf="!node.multipleChoice">
              <mat-form-field class="mat-form-field">
                <mat-select matNativeControl [placeholder]="node.placeholder" [formControl]="control"
                  [required]="node.required"
                  [(value)]="node.value[i]"
                  (valueChange)="onChanges(node, i, node.value[i])">
                  <mat-option *ngFor="let opt of node.options" [value]="opt['label']">{{opt['label']}}</mat-option>
                </mat-select>
                <mat-hint>{{node.hint}}</mat-hint>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>


</div>
</ng-template>

